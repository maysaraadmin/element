# =============================================================================
# Matrix Server Configuration - Single .env file for all services
# =============================================================================

# DOMAIN AND SERVER CONFIGURATION
DOMAIN=ms.local
SYNAPSE_SERVER_NAME=matrix.${DOMAIN}
TZ=Europe/Athens

# PATHS CONFIGURATION (Organized project structure)
CONF_PATH=./configs
DATA_PATH=./data
CERT_PATH=./certs

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
POSTGRES_DB=synapse_db
POSTGRES_USER=synapse
POSTGRES_PASSWORD=your_secure_db_password_change_this
PGDATA=/var/lib/postgresql/data/synapse
POSTGRES_INITDB_ARGS=--encoding=UTF-8 --lc-collate=C --lc-ctype=C

# Database Performance Settings
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_WORK_MEM=4MB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_CHECKPOINT_COMPLETION_TARGET=0.9
POSTGRES_WAL_BUFFERS=16MB
POSTGRES_DEFAULT_STATISTICS_TARGET=100
POSTGRES_RANDOM_PAGE_COST=1.5
POSTGRES_EFFECTIVE_IO_CONCURRENCY=200
POSTGRES_MAX_CONNECTIONS=200

# =============================================================================
# SYNAPSE HOMESERVER CONFIGURATION
# =============================================================================
SYNAPSE_REPORT_STATS=no
SYNAPSE_ENABLE_REGISTRATION=true
SYNAPSE_ENABLE_TLS=false
SYNAPSE_NO_TLS=true

# Security Settings - CHANGE THESE TO SECURE RANDOM VALUES
SYNAPSE_MACAROON_SECRET_KEY=your_secure_macaroon_secret_key_32_chars_min
SYNAPSE_REGISTRATION_SHARED_SECRET=your_secure_registration_secret_32_chars_min

# Performance Settings
SYNAPSE_MAX_UPLOAD_SIZE=50M
SYNAPSE_RC_MESSAGES_PER_SECOND=0.2
SYNAPSE_RC_MESSAGE_BURST_COUNT=10
SYNAPSE_FEDERATION_RATELIMIT_BURST_COUNT=20
SYNAPSE_FEDERATION_RATELIMIT_MESSAGES_PER_SECOND=1

# Logging
SYNAPSE_LOG_LEVEL=INFO

# Media Store Settings
SYNAPSE_MEDIA_STORE_PATH=/data/media_store

# =============================================================================
# TRAEFIK PROXY CONFIGURATION
# =============================================================================
TRAEFIK_ENTRYPOINTS_WEB=true
TRAEFIK_ENTRYPOINTS_WEB_ADDRESS=:80
TRAEFIK_ENTRYPOINTS_WEBSEC=true
TRAEFIK_ENTRYPOINTS_WEBSEC_ADDRESS=:443
TRAEFIK_PROVIDERS_DOCKER=true
TRAEFIK_API=true
TRAEFIK_API_DASHBOARD=true
TRAEFIK_API_INSECURE=true

# SSL/TLS Configuration (for production)
TRAEFIK_SSL_CERT_FILE=${CERT_PATH}/fullchain.pem
TRAEFIK_SSL_KEY_FILE=${CERT_PATH}/privkey.pem

# =============================================================================
# EMAIL CONFIGURATION (for password resets and notifications)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-gmail-app-password

# =============================================================================
# ADDITIONAL SECURITY SETTINGS
# =============================================================================
REGISTRATION_SHARED_SECRET=change_to_secure_secret
MACAROON_SECRET_KEY=change_to_secure_secret
FORM_SECRET=change_to_secure_secret
LDAP_BIND_PASSWORD=change_to_ldap_password_if_used

# =============================================================================
# BRIDGE AND BOT CONFIGURATION (Optional - configure as needed)
# =============================================================================
# Telegram Bridge Settings (if using)
TELEGRAM_BRIDGE_HOMESERVER_URL=https://matrix.${DOMAIN}
TELEGRAM_BRIDGE_AS_TOKEN=your_appservice_token

# Facebook Bridge Settings (if using)
FACEBOOK_BRIDGE_HOMESERVER_URL=https://matrix.${DOMAIN}
FACEBOOK_BRIDGE_AS_TOKEN=your_appservice_token

# Webhook Bridge Settings (if using)
WEBHOOK_BRIDGE_HOMESERVER_URL=https://matrix.${DOMAIN}
WEBHOOK_BRIDGE_AS_TOKEN=your_appservice_token

# Maubot Settings (if using)
MAUBOT_HOMESERVER_URL=https://matrix.${DOMAIN}
MAUBOT_AS_TOKEN=your_appservice_token


